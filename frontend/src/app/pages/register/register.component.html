<div class="container">
    <form class="form" [formGroup]="form" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline">
            <mat-label>Email: </mat-label>
            <input matInput type="email" formControlName="email" required />
            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
                <mat-error *ngIf="email.hasError('required')">This field is required</mat-error>
                <mat-error *ngIf="email.hasError('email')">Please enter valid email address</mat-error>
            </div>
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Password: </mat-label>
            <input matInput type="password" formControlName="password" required />
            <div *ngIf="password.invalid && (password.dirty || password.touched)" class="alert alert-danger">
                <mat-error *ngIf="password.hasError('required')">This field is required</mat-error>
            </div>
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Confirm password: </mat-label>
            <input matInput type="password" formControlName="confirmPassword" required />
            <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)" class="alert alert-danger">
                <mat-error *ngIf="confirmPassword.hasError('required')">This field is required</mat-error>
            </div>
        </mat-form-field>

        <ul *ngIf="errorMessages().length > 0">
            @for (error of errorMessages(); track $index) {
                <li>{{ error }}</li>
            }
        </ul>
        <ul *ngIf="form.errors">
            <li *ngIf="form.errors?.['PasswordNoMatch']">
                Password doesn't match.
            </li>
        </ul>

        <button mat-button type="submit" [disabled]="!form.valid">Register</button>
    </form>
</div>